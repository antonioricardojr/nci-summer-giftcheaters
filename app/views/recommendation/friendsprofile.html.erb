<% provide(:title, @friend_profile["first_name"]+"&#39;s interests") %>
<section id="welcome">
	<br><br>
	<div class="container">
		<div class="row">
			<div class="col-lg-2 text-center"></div>
			<div class="col-lg-8 text-center">
				<h3><%= @friend_profile["first_name"] %>&#39;s Interests</h3>
				<hr class="star-primary">
				<p>Those are <%= @friend_profile["gender"]=="female"  ? 'her' : 'his' %> interests, please choose one category to get gift recommendations.</p>
				<br>
				<%= @friend_likes%>
				<div class="box-wrap">
					<div class="box-heading">
						<h4><i class="icon-signal"></i> Colors</h4>
					</div>
					<div class="box-inner">
						<div class="row-fluid">
							<div class="widget-main">
								<div id="piechart-placeholder"></div>
							</div>
						</div>
					</div>
				</div>
			</div> <!-- /col-lg-6 text-center -->
			<div class="col-lg-2 text-center"></div>
		</div> <!-- /row -->
	</div> <!-- /container -->
</section>

<%= render( :partial => 'layouts/jsincludepiechart.html', :formats => [:html]) %>

<script type="text/javascript">
	$(function() {  
		var data = [
		{ label: "Green",  data: 30.7, color: "#48CA3B"},
		{ label: "Blue",  data: 24.5, color: "#00BCE1"},
		{ label: "Purple",  data: 10.2, color: "#4D3A7D"},
		{ label: "Red",  data: 18.6, color: "#AD1D28"},
		{ label: "Yellow",  data: 16, color: "#DEBB27"}
		];

		var placeholder = $('#piechart-placeholder').css({'width':'70%' , 'min-height':'150px'});
		$.plot(placeholder, data, {

			series: {
				pie: {
					show: true,
					tilt:0.8,
					highlight: {
						opacity: 0.25
					},
					stroke: {
						color: '#fff',
						width: 2
					},
					startAngle: 2

				}
			},
			legend: {
				show: true,
				position: "ne", 
				labelBoxBorderColor: null,
				margin:[-30,15]
			}
			,
			grid: {
				hoverable: true,
				clickable: true
			},
        tooltip: true, //activate tooltip
        tooltipOpts: {
        	content: "%s : %y.1",
        	shifts: {
        		x: -30,
        		y: -50
        	}
        }
        
    });


		var $tooltip = $("<div class='tooltip top in' style='display:none;'><div class='tooltip-inner'></div></div>").appendTo('body');
		placeholder.data('tooltip', $tooltip);
		var previousPoint = null;

		placeholder.on('plothover', function (event, pos, item) {
			if(item) {
				if (previousPoint != item.seriesIndex) {
					previousPoint = item.seriesIndex;
					var tip = item.series['label'] + " : " + item.series['percent']+'%';
					$(this).data('tooltip').show().children(0).text(tip);
				}
				$(this).data('tooltip').css({top:pos.pageY + 10, left:pos.pageX + 10});
			} else {
				$(this).data('tooltip').hide();
				previousPoint = null;
			}

		});
	});

</script>